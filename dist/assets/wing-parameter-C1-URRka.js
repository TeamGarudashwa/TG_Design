import"./style-hLBxd820.js";import"./export-utils-B9yzkw5u.js";function E(){console.log("Wing Parameters module initialized"),L(),M(),q(),N();const e=document.getElementById("reset-wing");e&&e.addEventListener("click",A);const t=document.getElementById("calculate-wing");t&&t.addEventListener("click",function(n){n.preventDefault(),k(),f(!0)}),document.getElementById("dark-mode-toggle")&&C(),v()&&f(!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();function B(){try{const e=localStorage.getItem("wingParametersInputs");if(e){const n=JSON.parse(e);if(n&&n.weight)return parseFloat(n.weight)}const t=localStorage.getItem("wingAreaInputs");if(t){const n=JSON.parse(t);if(n&&n.weight)return parseFloat(n.weight)}const o=document.getElementById("weight-input");return o&&o.value?parseFloat(o.value):null}catch(e){return console.error("Error getting aircraft weight:",e),null}}function k(){try{const e={rootChord:document.getElementById("root-chord-input")?.value||"",tipChord:document.getElementById("tip-chord-input")?.value||"",surfaceArea:document.getElementById("surface-area-input")?.value||"",wingspan:document.getElementById("wingspan-input")?.value||"",velocity:document.getElementById("velocity-input")?.value||"",cl:document.getElementById("cl-input")?.value||"",clMax:document.getElementById("clmax-input")?.value||"",weight:B()||""};return localStorage.setItem("wingParametersInputs",JSON.stringify(e)),console.log("Saved wing parameters:",e),!0}catch(e){return console.error("Error saving inputs:",e),!1}}function L(){try{const e=localStorage.getItem("wingParametersInputs");if(!e)return console.log("No saved wing parameters found"),!1;const t=JSON.parse(e);console.log("Loading saved wing parameters:",t);const o=[{key:"rootChord",id:"root-chord-input"},{key:"tipChord",id:"tip-chord-input"},{key:"surfaceArea",id:"surface-area-input"},{key:"wingspan",id:"wingspan-input"},{key:"velocity",id:"velocity-input"},{key:"cl",id:"cl-input"},{key:"clMax",id:"clmax-input"},{key:"weight",id:"weight-input"}];let n=!1;return o.forEach(({key:l,id:s})=>{const r=document.getElementById(s);r&&t[l]!==void 0&&t[l]!==""&&(r.value=t[l],n=!0,console.log(`Restored ${l} value:`,t[l]))}),n&&setTimeout(()=>{f(!0),console.log("Recalculated with loaded values")},100),n}catch(e){return console.error("Error loading saved inputs:",e),!1}}function M(){["#root-chord-input","#tip-chord-input","#surface-area-input","#wingspan-input","#velocity-input","#cl-input","#clmax-input"].forEach(t=>{const o=document.querySelector(t);if(o){const n=o.cloneNode(!0);o.parentNode.replaceChild(n,o),n.addEventListener("input",function(){k(),v()&&f()})}})}function v(){const e=parseFloat(document.getElementById("root-chord-input")?.value),t=parseFloat(document.getElementById("tip-chord-input")?.value),o=parseFloat(document.getElementById("wingspan-input")?.value),n=parseFloat(document.getElementById("surface-area-input")?.value);console.log("Input values:",{rootChord:e,tipChord:t,wingspan:o,surfaceArea:n});const l=!isNaN(n)&&n>0,s=!isNaN(e)&&!isNaN(t)&&!isNaN(o),r=l||s;return console.log("Input validation:",{hasSurfaceArea:l,hasWingDimensions:s,isValid:r}),r}function f(e=!1){console.log("calculateAndUpdate called with force:",e);const t=document.getElementById("wing-results"),o=document.getElementById("flight-dynamics-results");try{if(!e&&!v()){console.log("Skipping calculation: force is",e,"and hasRequiredInputs is false");return}console.log("Proceeding with calculation..."),t&&(t.style.display="block"),o&&(o.style.display="block");const n=parseFloat(document.getElementById("root-chord-input")?.value)||0,l=parseFloat(document.getElementById("tip-chord-input")?.value)||0,s=parseFloat(document.getElementById("wingspan-input")?.value)||0,r=parseFloat(document.getElementById("surface-area-input")?.value)||0,d=parseFloat(document.getElementById("velocity-input")?.value)||0,m=parseFloat(document.getElementById("cl-input")?.value)||0,g=parseFloat(document.getElementById("clmax-input")?.value)||0;let a=0,c=0;if(n>0&&l>0&&s>0){a=.5*(n+l)*s,c=a*64516e-8;const u=document.getElementById("surface-area-input");u&&!u.matches(":focus")&&(u.value=a.toFixed(4))}else if(r>0)a=r,c=r*64516e-8;else{console.error("Insufficient input for calculations");return}if(s>0&&a>0){const u=b(s,a);if(i("aspect-ratio-result",u.toFixed(2)),n>0&&l>0){const y=l/n;i("taper-ratio-result",y.toFixed(3))}const p=B();if(p>0&&c>0){const y=p/c;if(i("wing-loading-result",y.toFixed(2)),d>0&&m>0){const h=R(1.225,d,c,m);i("lift-result",h.toFixed(2));const x=D(h,p);if(i("load-factor-result",x.toFixed(2)),g>0){const w=T(p,1.225,c,g);i("vstall-result",w.toFixed(2)+" m/s");const S={vStall:w,lift:h,timestamp:new Date().toISOString()};localStorage.setItem("aerodynamicData",JSON.stringify(S)),console.log("Saved aerodynamic data:",S)}const I=document.getElementById("flight-dynamics-results");I&&(I.style.display="block")}}}console.log("All calculations complete"),t&&(t.style.display="block",t.scrollIntoView({behavior:"smooth",block:"start"}),console.log("Results section should now be visible"))}catch(n){console.error("Error in calculation:",n),alert("An error occurred during calculation. Please check the console for details.")}}function i(e,t){console.log(`Updating ${e} with value:`,t);const o=document.getElementById(e);o?(o.textContent=t,console.log(`Updated ${e} to:`,o.textContent),o.style.transition="all 0.3s ease",o.style.color="#4361ee",setTimeout(()=>{o.style.color=""},300)):(console.error(`Element with ID ${e} not found!`),console.log("Available result elements:",{"aspect-ratio-result":document.getElementById("aspect-ratio-result"),"taper-ratio-result":document.getElementById("taper-ratio-result"),"wing-loading-result":document.getElementById("wing-loading-result"),"lift-result":document.getElementById("lift-result"),"load-factor-result":document.getElementById("load-factor-result"),"vstall-result":document.getElementById("vstall-result")}))}function A(){if(confirm("Are you sure you want to reset all wing parameters?")){document.querySelectorAll('input[type="number"]').forEach(n=>{n.value="",n.classList.remove("error")}),document.querySelectorAll(".result-value").forEach(n=>{n.textContent="-"});const o=document.getElementById("wing-results");o&&(o.style.display="none"),localStorage.removeItem("wingParametersInputs"),console.log("Wing parameters form has been reset")}}function b(e,t){return!e||!t||t<=0?0:e*e/t}function C(){const e=document.getElementById("dark-mode-toggle");if(!e)return;const t=localStorage.getItem("darkMode")==="true";F(t),e.addEventListener("click",()=>{const o=document.body.classList.toggle("dark-mode");F(o)})}function F(e){document.documentElement.classList.toggle("dark-mode",e),document.body.classList.toggle("dark-mode",e),localStorage.setItem("darkMode",e);const t=document.querySelector("#dark-mode-toggle i");t&&(t.className=e?"fas fa-sun":"fas fa-moon")}function q(){const e=document.getElementById("wing-fullscreen-toggle"),t=document.getElementById("wing-results");if(!e||!t)return;e.addEventListener("click",()=>{document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()});const o=()=>{const n=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,l=e.querySelector("svg");n?(l.innerHTML=`
                <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>
            `,e.title="Exit fullscreen"):(l.innerHTML=`
                <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
            `,e.title="Enter fullscreen")};document.addEventListener("fullscreenchange",o),document.addEventListener("webkitfullscreenchange",o),document.addEventListener("mozfullscreenchange",o),document.addEventListener("MSFullscreenChange",o)}function N(){const e=document.getElementById("copy-results");e&&e.addEventListener("click",()=>{const t=[];document.querySelectorAll(".result-card").forEach(n=>{const l=n.querySelector("h4").textContent,s=[];n.querySelectorAll(".result-item").forEach(r=>{const d=r.querySelector(".result-label").textContent.trim(),m=r.querySelector(".result-value").textContent.trim(),g=r.querySelector(".result-unit").textContent.trim();s.push(`${d}: ${m} ${g}`.trim())}),t.push(`=== ${l} ===
${s.join(`
`)}`)});const o=t.join(`

`);navigator.clipboard.writeText(o).then(()=>{const n=e.innerHTML;e.innerHTML='<i class="fas fa-check"></i> Copied!',e.disabled=!0,setTimeout(()=>{e.innerHTML=n,e.disabled=!1},2e3)}).catch(n=>{console.error("Failed to copy results:",n),alert("Failed to copy results to clipboard. Please try again.")})})}function T(e,t,o,n){const l=e*9.81;return Math.sqrt(2*l/(t*o*n))}function R(e,t,o,n){return .5*e*Math.pow(t,2)*o*n}function D(e,t){return e/(t*9.81)}console.log("Wing Parameter HTML loaded");document.addEventListener("DOMContentLoaded",function(){console.log("DOM fully loaded");const e=window.location.pathname.split("/").pop()||"index.html";document.querySelectorAll(".tab").forEach(t=>{const o=t.getAttribute("href");e==="index.html"&&o==="index.html"||o&&o.includes(e.replace(".html",""))?t.classList.add("active"):t.classList.remove("active")});try{E(),console.log("Wing parameters module initialized")}catch(t){console.error("Failed to initialize wing parameters:",t),alert("Error initializing the wing parameters calculator. Please check the console for details.")}});
